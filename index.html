<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Easy English Adventure</title>

<style>
*{box-sizing:border-box;}
body{
margin:0;
font-family:'Comic Sans MS',cursive;
background:linear-gradient(#67c7ff,#b97cff);
min-height:100vh;
color:white;
overflow:hidden;
}

/* ================== OVERLAY ================== */
#startOverlay{
position:fixed;
top:0;left:0;right:0;bottom:0;
background:rgba(0,0,0,.85);
display:flex;
align-items:center;
justify-content:center;
z-index:10000;
font-size:28px;
cursor:pointer;
}

/* ================== TOP BAR ================== */
.topbar{
position:fixed;
top:10px;
right:10px;
display:flex;
gap:10px;
z-index:9999;
}
.topbar button{
background:#ffdd00;
border:none;
padding:12px 18px;
border-radius:12px;
font-weight:bold;
cursor:pointer;
box-shadow:3px 3px #000;
}

/* ================== SCREEN ================== */
.screen{
display:none;
min-height:100vh;
padding:80px 20px 20px;
animation:fade .6s;
}
.active{
display:flex;
flex-direction:column;
align-items:center;
gap:20px;
}

@keyframes fade{
from{opacity:0;}
to{opacity:1;}
}

h1,h2{
text-shadow:3px 3px #000;
}

/* ================== BUTTON ================== */
button{
padding:15px 30px;
border-radius:20px;
border:none;
font-size:18px;
background:#ffcc00;
cursor:pointer;
box-shadow:3px 3px #000;
}

/* ================== OPTIONS ================== */
.option-container{
display:flex;
flex-direction:column;
gap:15px;
width:100%;
max-width:300px;
}

.option{
background:white;
color:black;
border-radius:15px;
padding:15px;
width:100%;
text-align:center;
font-size:18px;
cursor:pointer;
transition:.3s;
}
.option.correct{background:#4cff4c;}
.option.wrong{background:#ff4c4c;color:white;}

/* ================== GAME ================== */
#timer{font-size:28px;color:#ff4444;}
.progress{
width:80%;
height:20px;
background:#ddd;
border-radius:10px;
overflow:hidden;
}
.progress div{
height:100%;
background:#00ff00;
width:0%;
}
</style>
</head>

<body>

<!-- ============ START OVERLAY ============ -->
<div id="startOverlay">üëâ Klik di mana saja untuk mulai üëà</div>

<!-- ============ TOP BAR ============ -->
<div class="topbar">
<button onclick="goHome()">üè† Home</button>
<button id="musicBtn">üéµ Music</button>
</div>

<!-- ============ SCREENS ============ -->
<div id="home" class="screen active">
<h1>Easy English Adventure</h1>
<button onclick="openWorld()">Start Adventure</button>
</div>

<div id="world" class="screen">
<h2>Choose Topic</h2>
<button onclick="startGame('colors')">Colors</button>
<button onclick="startGame('animals')">Animals</button>
<button onclick="startGame('numbers')">Numbers</button>
</div>

<div id="game" class="screen">
<h2 id="question"></h2>
<div id="timer">5</div>
<div class="progress"><div id="bar"></div></div>

<!-- Semua tombol pilihan dalam satu container -->
<div class="option-container" id="options"></div>
</div>

<div id="gameover" class="screen">
<h1 id="msg"></h1>
<h2 id="scoreText"></h2>
<button onclick="retry()">Retry</button>
</div>

<!-- ============ AUDIO (diletakkan paling bawah) ============ -->
<audio id="bgm" loop src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_0d82b1f3f3.mp3"></audio>
<audio id="correctSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_6b9a2e0c3a.mp3"></audio>
<audio id="wrongSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_76b81b0b20.mp3"></audio>

<script>
let audioUnlocked=false;
let bgm=document.getElementById("bgm");
let musicBtn=document.getElementById("musicBtn");

/* ========== DATA ========== */
const data={
colors:["Red","Blue","Green","Yellow","Black","White","Pink","Purple","Orange","Brown","Gray","Cyan","Gold","Silver","Violet"],
animals:["Cat","Dog","Bird","Cow","Fish","Horse","Lion","Tiger","Elephant","Duck","Goat","Sheep","Monkey","Frog","Rabbit"],
numbers:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"]
};

let topic="",current=0,score=0,time=5,timer;

/* ========== AUTOPLAY FIX ========== */
document.getElementById("startOverlay").addEventListener("click",()=>{
audioUnlocked=true;
bgm.play();
document.getElementById("startOverlay").style.display="none";
});

/* ========== MUSIC TOGGLE ========== */
musicBtn.addEventListener("click",()=>{
if(!audioUnlocked) return;
if(bgm.paused) bgm.play();
else bgm.pause();
});

/* ========== NAVIGATION ========== */
function show(id){
document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
}
function goHome(){show("home");}
function openWorld(){show("world");}

/* ========== GAME ========== */
function startGame(t){
topic=t;
current=0;
score=0;
show("game");
nextQ();
}

function nextQ(){
if(current>=15){endGame();return;}
let correct=data[topic][current];
document.getElementById("question").innerText="Find: "+correct;

let opts=[correct];
while(opts.length<3){
let r=data[topic][Math.floor(Math.random()*15)];
if(!opts.includes(r)) opts.push(r);
}
opts.sort(()=>Math.random()-0.5);

let html="";
opts.forEach(o=>{
html+=`<div class="option" onclick="answer(this,'${o}','${correct}')">${o}</div>`;
});
document.getElementById("options").innerHTML=html;

time=5;
document.getElementById("timer").innerText=time;
document.getElementById("bar").style.width=(current/15*100)+"%";

timer=setInterval(()=>{
time--;
document.getElementById("timer").innerText=time;
if(time<=0){clearInterval(timer);current++;nextQ();}
},1000);
}

function answer(el,a,c){
clearInterval(timer);
document.querySelectorAll(".option").forEach(o=>o.style.pointerEvents="none");
if(a==c){
el.classList.add("correct");
document.getElementById("correctSound").play();
score++;
}else{
el.classList.add("wrong");
document.getElementById("wrongSound").play();
}
setTimeout(()=>{current++;nextQ();},800);
}

function endGame(){
show("gameover");
document.getElementById("scoreText").innerText="Score: "+score+" / 15";
let msg="Keep Learning!";
if(score==15) msg="Fantastic!";
else if(score>10) msg="Great Job!";
document.getElementById("msg").innerText=msg;
}

function retry(){startGame(topic);}
</script>

</body>
</html>
